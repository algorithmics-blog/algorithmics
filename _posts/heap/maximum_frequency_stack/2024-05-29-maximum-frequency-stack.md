---
layout: post
title:  "Стек наиболее часто встречающихся элементов"
complexity: hard
original_url: https://leetcode.com/problems/maximum-frequency-stack/description/
tag: hard
---

## Оглавление

- [Описание задачи](#описание-задачи)
- [Ограничения](#ограничения)
- [Примеры](#примеры)
- [Решение](#решение)

---

## Описание задачи

Необходимо реализовать структуру данных, которая позволит сохранять и доставать целочисленные элементы.
Для этого необходимо реализовать 3 функции:
1. `Constructor() FreqStack` конструктор, инициализирующий структкры данных. 
2. `FreqStack.Push(val int)` метод структуры данных, позволяющий сохранить целочисленный элемент внутрь структуры данных `FreqStack`
3. `FreqStack.Pop() int` метод структуры данных, удаляющий и возвращающий элемент из структуры данных, по следующему принципу:
  - Если в `FreqStack` существует элемент, который встречается чаще остальных, из стек извлекается этот элемент (последний добавленный из серии)
  - Если в `FreqStack` сушествуют несколько наборов элементов с одинаковой частотой, извлекается элемент из того набора, чей элемент был добавлен а `FreqStack` последним
  - Если в `FreqStack` все элементы имеют одинаковую частоту/все элементы встречаются только 1 раз, элемент извлекается по принципу стека

---

## Ограничения

- Добавляемые/извлекаемые элементы лежат в диапазоне от 0 до 1 000 000 000
- Максимальное количество вызовов функций `Push` и `Pop` - 20 000
- Гарантируется, что перед вызовом функции `Pop` в `FreqStack` будет как минимум один элемент

---

## Примеры

{% tabs reverse_words_in_a_string %}
{% tab reverse_words_in_a_string Пример №1 %}
**Инициализация**:
```go
stack := Constructor()

stack.Push(5)
stack.Push(7)
stack.Push(5)
stack.Push(7)
stack.Push(4)
stack.Push(5)
```

**Извлечение**:
```go
stack.Pop() // 5
stack.Pop() // 7
stack.Pop() // 5
stack.Pop() // 4
```

**Объяснение**:
1. Первым извлекается элемент `5`, так как он самый частотный в стеке. При этом извлекается та `5`, которая была добавлена последней (по принципу стека)
2. Вторым извлекается элемент `7`, так как в стеке оба элемента `5` и `7` встречаются по 2 раза, но последняя `7` была добавлена позже, чем последняя `5` (`5`, которую мы добавили последним `Push`'ом мы извлекли первым вызовом `Pop`)
3. Третьим элементом излекается элемент `5`, так как теперь это самый частотный эоемент в стеке
4. Четвертым извлекается элемент `4`, так как теперь в стеке все элементы имеют одинаковую частоту (каждый элемент встречается один раз), а элемент `4` был добавлен в стек последним 
{% endtab %}
{% endtabs %}

---

## Решение

Не смотря на то что структуру данных в данной задаче назвали стеком и ее поведение частично похоже на стек, лучше всего в данном случае подходит структура `Heap` (куча).

### Реализация

{% include code-example.md go_path="go/solution.go" ts_path="ts/solution.ts" %}

### Оценка сложности

**По времени**


**По памяти**

