---
layout: layouts/post.njk
title: Разворот целого числа
date: 2023-12-08
complexity: medium
original_url: https://leetcode.com/problems/reverse-integer/description/
preview_image: /images/previews/reverse_integer.webp
tags:
  - medium
  - math
  - integers
---
---

## Описание задачи

Дано 32-битное целое число `x` со знаком.
Напишите функцию `reverse`, которая принимает на вход `x`, а возвращает перевернутое число.

Если изменение `x` приводит к выходу значения за пределы диапазона 32-битных целых чисел со знаком <code>[-2<sup>31</sup>, 2<sup>31</sup> - 1]</code>, верните `0`.
Учтите, что среда исполнения функции не позволяет хранить 64-битные целые числа со знаком или без знака.

---

## Ограничения

- Значение `x` находится в диапазоне от <code>-2<sup>31</sup></code> до <code>2<sup>31</sup> - 1</code>

---

## Примеры

{% tabs %}

{% tab "Пример №1" %}

**Входные данные**: `x = 123`

**Ответ**: `321`

{% endtab %}

{% tab "Пример №2" %}

**Входные данные**: `x = -123`

**Ответ**: `-321`

{% endtab %}

{% tab "Пример №3" %}

**Входные данные**: `x = 120`

**Ответ**: `21`

{% endtab %}

{% tab "Пример №4" %}

**Входные данные**: `x = 2147483647`

**Ответ**: `0`

Перевернутое число `7463847421` выходит за пределы 32-битного диапазона.

{% endtab %}

{% tab "Пример №5" %}

**Входные данные**: `x = -2147483647`

**Ответ**: `0`

Перевернутое число `-7463847421` выходит за пределы 32-битного диапазона.

{% endtab %}
{% endtabs %}

---

## Решение

Разобьем задачу на две части:

1. Разворот маленького числа. Для этого воспользуемся реализацией функции `reverse` из задачи [«Число после двойного переворота»](/blog/number_double_reversion/)
2. Обработка возможного переполнения 32-битного пространства.

### Переполнение 32-битного пространство

Как было сказано в условиях задачи, число не может превышать диапазон 32-битного пространства <code>[-2<sup>31</sup>, 2<sup>31</sup> - 1]</code>.
Это значит, что если мы попытаемся развернуть число `2147483647`, то на последней итерации мы получим `7463847412`, а оно сильно выходит за допустимые границы.

Как же нам обработать переполнение?

Давайте определим, что верхняя граница 32-битного диапазона называется `MAX_INT`, а нижняя — `MIN_INT`.
Теперь сформулируем несколько правил.

**Для положительных чисел**

- Если `res > MAX_INT / 10`, то после умножения его на 10 и добавления к нему `right` мы гарантированно получим переполнение.
- Если `res == MAX_INT / 10` то после умножения его на 10 и добавления к нему `right` мы получим переполнение только если `right > 7`.

**Для отрицательных чисел**

- Если `res < MIN_INT / 10`, то после умножения его на 10 и добавления к нему `right` мы гарантированно получим переполнение.
- Если `res == MIN_INT / 10` то после умножения его на 10 и добавления к нему `right` мы получим переполнение только если `right < -7`.


### Реализация

Обратите внимание, что в Type Script приходится дополнительно округлять числа с плавающей точкой в зависимости от знака.
Также тут нет констант для минимального и максимального 32-битных чисел, поэтому их приходится определять вручную.

{% renderFile "_includes/components/solution.njk", taskName = "reverse_integer" %}

### Оценка сложности

**По времени**

Для разворота числа нам нужно произвести `k` итераций, где `k` — количество цифр в числе, что примерно равно`log(x)`.
Поэтому сложность равна `O(log(x))`.

**По памяти**

`O(1)` — дополнительная память константна.