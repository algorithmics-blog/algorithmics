---
layout: layouts/post.njk
title: Пары одинаковых строк и колонок
date: 2024-06-17
complexity: medium
original_url: https://leetcode.com/problems/equal-row-and-column-pairs/description/
preview_image: /images/previews/equal_row_and_column_pairs.webp
tags:
  - medium
  - matrix
  - hash table
---
---

## Описание задачи

Дана матрица `grid` размером `n x n`, которая состоит из целых положительных чисел. 

Посчитайте количество пар <code>(r<sub>i</sub>, c<sub>j</sub>)</code>, где строка <code>r<sub>i</sub></code>
равна колонке <code>c<sub>j</sub></code>

Строка и колонка считаются равными, если они состоят из одинаковых элементов в одинаковом порядке.

---

## Ограничения

- Размер `n` находится в диапазоне от 1 до 200
- Значение каждого элемента в матрице находится в диапазоне от 1 до 10<sup>5</sup>

---

## Примеры


{% tabs %}
{% tab "Пример №1" %}

![Пример 1](/images/resources/equal_row_and_column_pairs/example_1.png)

**Входные данные**: `grid = [[3,2,1],[1,7,6],[2,7,7]]`

**Ответ**: `1`

Есть одна одинаковая пара:

- (Строка 2, Колонка 1): `[2,7,7]`

{% endtab %}

{% tab "Пример №2" %}

![Пример 1](/images/resources/equal_row_and_column_pairs/example_2.png)

**Входные данные**: `grid = [[3,1,2,2],[1,4,4,5],[2,4,2,2],[2,4,2,2]]`

**Ответ**: `3`

Есть три одинаковые пары:

- (Строка 0, Колонка 0): `[3,1,2,2]`
- (Строка 2, Колонка 2): `[2,4,2,2]`
- (Строка 3, Колонка 2): `[2,4,2,2]`

{% endtab %}
{% endtabs %}


---

## Решение

Чтобы решить задачу, нам нужно определить количество пар строк и столбцов в матрице, которые совпадают.
Для этого мы используем два прохода: один для строк и один для столбцов.

**Создаем карту подсчета строк:**

- Инициализируем пустую хеш-таблицу (объект в случае TypeScript)  `countMap`, который будет хранить строки в виде ключей и их количество в виде значений.
- Проходим по каждой строке матрицы. Для каждой строки создаем строковой ключ, конкатенируя все её элементы, разделенные точкой с запятой.
- Если такой ключ уже существует в `countMap`, увеличиваем значение на единицу. В противном случае, устанавливаем значение равным единице.

**Подсчет совпадающих столбцов:**

- Инициализируем счетчик `counter`, который будет хранить общее количество совпадающих пар.
- Проходим по каждому столбцу матрицы. Для каждого столбца создаем строковой ключ, конкатенируя элементы каждого столбца по порядку, разделенные точкой с запятой.
- Если такой ключ существует в `countMap`, добавляем значение из `countMap` к `counter`.

После прохода по всем столбцам возвращаем значение `counter`, которое будет равно количеству совпадающих пар строк и столбцов.

### Реализация

{% renderFile "_includes/components/solution.njk", taskName = "equal_row_and_column_pairs" %}

#### Оценка сложности

**По времени**

Решение имеет временную сложность <code>O(n<sup>2</sup>)</code>, так как мы проходим по всей матрице дважды.

**По памяти**

Сложность по памяти равна `O(n)` так как мы создаем хеш-таблицу по количеству уникальных строк.
В худшем случае размер этой таблицы будет равен `n` если все строки в матрице уникальны.