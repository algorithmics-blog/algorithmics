---
layout: layouts/post.njk
title: Преобразование строки в целое число (atoi)
date: 2024-08-01
complexity: medium
original_url: https://leetcode.com/problems/string-to-integer-atoi/
preview_image: /images/previews/string_to_integer_atoi.webp
tags:
  - medium
  - string
---

---

## Описание задачи

Реализуйте функцию `myAtoi(string s)`, которая преобразует строку в 32-битное знаковое целое число.

Функция должна следовать следующим правилам при чтении строки:

1. Пропустить любые ведущие пробелы.
2. Проверить наличие знака (`+` или `-`).
3. Читать следующие символы до тех пор, пока они составляют последовательность цифр.
4. Преобразовать эти цифры в целое число.
5. Если первая непустая последовательность символов не является допустимым целым числом, вернуть 0.
6. Если полученное значение превышает диапазон 32-битного знакового целого числа, вернуть `INT_MAX` (2<sup>31</sup> - 1)
   или `INT_MIN` (-2<sup>31</sup>).

---

## Ограничения

- Длина строки находится в диапазоне от 0 до 200
- Строка `s` состоит из английских букв (как заглавных, так и строчных), цифр, знаков <code>'&nbsp;'</code> (
  пробел), `'+'`, `'-'` и `'.'`.

---

## Примеры

{% tabs %}
{% tab "Пример №1" %}

**Входные данные**: `"42"`

**Ответ**: `42`

Преобразуем строку `"42"` в целое число 42.

{% endtab %}
{% tab "Пример №2" %}

**Входные данные**: `"   -42"`

**Ответ**: `-42`

Пропускаем начальные пробелы и преобразуем строку `"-42"` в целое число -42.

{% endtab %}

{% tab "Пример №3" %}

**Входные данные**: `"4193 with words"`

**Ответ**: `4193`

Прекращаем чтение после числовой последовательности, так как первый нечисловой символ - пробел.

{% endtab %}

{% tab "Пример №4" %}

**Входные данные**: `"words and 987"`

**Ответ**: `0`

Первый непустой символ - буква, которая не является допустимым числом.

{% endtab %}

{% tab "Пример №5" %}

**Входные данные**: `"-91283472332"`

**Ответ**: `-2147483648`

Значение меньше нижнего предела 32-битного знакового целого числа, поэтому возвращаем `INT_MIN` (-2<sup>31</sup>).

{% endtab %}
{% endtabs %}

---

## Решение

Для того чтобы преобразовать строку в число, нам необходимо проитерироваться по всем символам в строке, проверяя все
необходимые условия.

В первую очередь нужно пропустить все ведущие пробелы в строке.
Для этого запустим цикл типа `while` и будем увеличивать переменную `index` для определения позиции, откуда надо
начинать преобразование числа.

После этого нам нужно проверить присутствует ли в строке определение знака числа.
Для этого заведем переменную `sign`.

- Если встречаем в строке символ `+`, то устанавливаем значение `sign` равным `1`.
- Если встречаем в строке символ `-`, то устанавливаем значение `sign` равным `-1`.

Если в строке присутствовал знак числа, то еще необходимо увеличить `index` на единицу.

Теперь осталось преобразовать оставшиеся символы в число.
Чтобы проверить, является ли символ в строке числом без приведения типов можно воспользоваться маленьким хаком и
сравнивать его со строками.

- Если `char < "0"` или `char > "9"`, то символ не является числом.
  Как только мы встретили не числовой символ в строке, то дальнейший разбор необходимо прекратить.
- Если смвол является числом, то его необходимо добавить к результирующему числу.
  Для этого надо воспользоваться следующей формулой `res = res * 10 + char - '0'`.
  Это позволяет прибавить цифру справа к существующему числу.

После этих операций необходимо проверить, превысило ли число минимальное или максимальное значение.

- Если превышено максимальное значение, то в качестве ответа надо вернуть максимальное.
- Если превышено минимальное значение, то в качестве ответа надо вернуть минимальное.

В заключение в ответе нужно вернуть ответ `res` умноженный на знак `sign`.

### Реализация

{% renderFile "_includes/components/solution.njk", taskName = "atoi" %}

### Оценка сложности

`n` - длина строки

**По времени**

Сложность по времени линейная — `O(n)`, так как мы итерируемся по всем элементам массива в худшем случае.

**По памяти**

Сложность по памяти константная — `O(1)`, так как мы не создаем дополнительных переменных.
